-- trick to check if a file exists
local exists = \name -> os.rename(name, name) and true or false

-- convert only if needed
if not exists("lhc_as-built_gen.mad") then
  MADX:load("lhc_as-built.seq", "lhc_as-built_gen.mad")
  MADX:load("lhc_uvar.madx"   , "lhc_uvar_gen.mad"    )
  MADX:load("opt_inj.madx"    , "opt_inj_gen.mad"     )
--  MADX:load("opt_inj_colltunes.madx", "opt_inj_colltunes_gen.mad")
end

if exists("lhc_as-built_gen.mad") then
  require 'lhc_as-built_gen'
  require 'lhc_uvar_gen'
  require 'opt_inj_gen'
  --require 'opt_inj_colltunes_gen'
end

local lhcb1, lhcb2 in MADX
print(#lhcb1, #lhcb2)