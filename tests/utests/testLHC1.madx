TITLE, "TEST LHC " ;
REAL CONST L.TANC = 0;
REAL CONST L.TCDQA = 0;
REAL CONST L.TCP   = 0.0;

REAL CONST L.MBXWT = 0.0;
REAL CONST L.MBLS2 = 0.0;
REAL CONST L.TASB  = 0.0;
REAL CONST L.BTVSS075 = 0.0;
REAL CONST L.MBLW = 0.0;

REAL CONST L.TCTVB = 0;
REAL CONST L.X5ZDC002 = 0;
REAL CONST L.TCDDM = 0;



OPTION, -ECHO, -WARN, INFO;
CALL, FILE="/Users/shreyber/new_mad/MAD/tests/share/LHC/lhc_as-built.seq";
CALL, FILE="/Users/shreyber/new_mad/MAD/tests/share/LHC/opt_inj.madx";

BEAM, SEQUENCE=LHCB1, PARTICLE=PROTON, PC=450;

SELECT, FLAG=TWISS, CLEAR;
SELECT, FLAG=TWISS, PATTERN=IP, COLUMN=NAME,S, X, PX,  Y, PY, T , PT;
SELECT, FLAG=TWISS, PATTERN=S.DS.L;
SELECT, FLAG=TWISS, PATTERN=E.DS.R;

USE, SEQUENCE=LHCB1;
select,flag=survey,clear;
select,flag=survey,column=name,keyword,l,angle,x,z;
//survey,psi0=0.0,file="testSurveyLHC1.tfs";
//TWISS, SEQUENCE=LHCB1, FILE="testTwissLHC1.tfs";


ptc_create_universe;

ptc_create_layout model=1, method=2, nst=1, exact=true, time=true ;
ptc_setswitch debuglevel=1, nocavity=true, time=true, totalpath=false, fringe=false;

ptc_start x=0, px=0, y=0, py=0, t=0, pt=0;
ptc_observe place = IP1 ;
PTC_OBSERVE, place=lhcb1$end;

ptc_trackline, turns=1, onetable,  file='testPTCLHC1.tfs';
ptc_track_end;

ptc_end;

STOP;

