! cd track_ref ; ../madx64 sbend_bug.madx > sbend_bug.out 2>&1 ; tail -n 5 sbend_bug.out ; cd ..
! ../madx64 sbend_bug.madx

seqDRIFT: sequence, l=5 ;
  DRIFT1: drift, at=0.75, l=1.5 ;
  DRIFT2: drift, at=3.25, l=1.5 ;
endsequence ;

seqQUAD: sequence, l=2 ;
 QUAD: quadrupole, at=0.75, l=1.5, k1=0.21 ;
endsequence ;

energy=1; model=2; method=2; nst=1; order=2; icase=56; debug=2;
x=3e-3; px=-2e-4; y=-2e-3; py=3e-4; t=1e-5; pt=2e-5;

beam, sequence=seqQUAD, particle=proton, energy=energy ;
use , sequence=seqQUAD ;

show beam%seqDRIFT;

ptc_create_universe ;
ptc_create_layout, model=model, method=method, nst=nst, time=true, exact=true ;
ptc_setswitch, debuglevel=debug, exact_mis=true, time=true, totalpath=false ;
ptc_twiss, closed_orbit=false, no=order,icase=icase,x=x,px=px,y=y,py=py,t=t,pt=pt ;
ptc_end ;
