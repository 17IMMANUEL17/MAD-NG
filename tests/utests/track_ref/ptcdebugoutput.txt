
  ++++++++++++++++++++++++++++++++++++++++++++
  +     MAD-X 5.04.01  (64 bit, Darwin)      +
  + Support: mad@cern.ch, http://cern.ch/mad +
  + Release   date: 2018.07.10               +
  + Execution date: 2018.10.03 11:36:34      +
  ++++++++++++++++++++++++++++++++++++++++++++
option, -info ;



beam ;



mqf.k1 =  0.3037241107 ;

mqd.k1 = -0.3037241107 ;



! sequence

fodo: sequence, l=10, refer=entry ;

mqf: quadrupole, at=0, l=1, k1:=mqf.k1 ;

dff: drift,      at=1, l=4 ;

mqd: quadrupole, at=5, l=1, k1:=mqd.k1 ;

dfd: drift,      at=6, l=4 ;

endsequence ;



! check values

value, mqf->k1, mqd->k1 ;

mqf->k1            =       0.3037241107 ;
mqd->k1            =      -0.3037241107 ;


! track

use, sequence=fodo ;

track, onepass, onetable, dump, file="track_fodo_madx." ;

enter TRACK module
one pass is on
start, x=0, px=1e-6, y=0, py=5e-7, t=0, pt=0;

observe, place=#s ;

observe, place=mqf ;

observe, place=dff ;

observe, place=mqd ;

observe, place=dfd ;

observe, place=#e ;

run, turns=1 ;

endtrack ;

exit TRACK module



! match thick lens

!use, sequence=cell ;

!match, sequence=cell ;

!  ! search for quads strengths

!  vary, name = k1.qf, step = 1e-5 ;

!  vary, name = k1.qd, step = 1e-5 ;

!  ! for cell with phase advance of pi/2 (specified in 2*pi unit!)

!  constraint range = #e, mux = u.cell/(2*pi) ;

!  constraint, range = #e, muy = u.cell/(2*pi) ;

!  lmdif, calls = 20, tolerance = 1e-16 ;

!endmatch ;



ptc_create_universe;

Determined SECTOR NMUL MAX :  0
ptc_create_layout, model=2, method=2, nst=1, time=true, exact=true;

 MAD-X Beam Parameters
                  Energy : 0.100000E+01
          Kinetic Energy : 0.999489E+00
      Particle Rest Mass : 0.510999E-03
                Momentum : 0.100000E+01
 Setting MADx with
     energy           1.0000000000000000
     method                   2
     Num. of steps            1
     charge           1.0000000000000000
 ## GETMAT7R:MTH=           2 L=   1.0000000000000000      NST=           1 B0=   0.0000000000000000      BN1=   0.0000000000000000      BN2=  0.30372411069999999
 ## GETMAT7R:MTH=           2 L=   1.0000000000000000      NST=           1 B0=   0.0000000000000000      BN1=   0.0000000000000000      BN2= -0.30372411069999999
  Length of machine:    10.000000000000000
 The machine is a RING
 ------------------------------------ PTC Survey ------------------------------------
 Before start:    0.0000000000000000        0.0000000000000000        0.0000000000000000
 Before   end:    0.0000000000000000        0.0000000000000000        0.0000000000000000
 After  start:    0.0000000000000000        0.0000000000000000        0.0000000000000000
 After    end:    0.0000000000000000        0.0000000000000000        10.000000000000000
ptc_start, x=0, px=1e-6, y=0, py=5e-7, t=0, pt=0;

ptc_observe, place=#s ;

obs_points: 2
ptc_observe, place=mqf ;

obs_points: 3
ptc_observe, place=dff ;

obs_points: 4
ptc_observe, place=mqd ;

obs_points: 5
ptc_observe, place=dfd ;

obs_points: 6
ptc_observe, place=#e ;

obs_points: 7
ptc_track, icase=56, closed_orbit=false, dump, onetable, element_by_element, file="ptctrack_fodo_madx." ;

 ************ State Summary ****************
 MADTHICK=>KIND =   37  MATRIX-KICK-MATRIX
  Rectangular Bend: input arc length (rho alpha)
  Default integration method     2
  Default integration steps      1
 This is an electron (positron actually if charge=1)
       EXACT_MODEL =  TRUE
       TOTALPATH   =     0
       RADIATION   =  FALSE
       STOCHASTIC  =  FALSE
       ENVELOPE    =  FALSE
       NOCAVITY    =  TRUE
       TIME        =  TRUE
       FRINGE      =  FALSE
       PARA_IN     =  FALSE
       ONLY_2D     =  FALSE
       ONLY_4D     =  FALSE
       DELTA       =  FALSE
       SPIN        =  FALSE
       MODULATION  =  FALSE
       RAMPING     =  FALSE
       ACCELERATE  =  FALSE

## INTER_TKTF:L=   1.0000000000000000      NST=           1 POS=           1
## INTER_TKTF-0:   0.0000000000000000        9.9999999999999995E-007   0.0000000000000000        4.9999999999999998E-007  -0.0000000000000000        0.0000000000000000
## PUSHTKT7R:TIME= T DIR=           1 CHG=   1.0000000000000000      BETA0=  0.99999986944003005
## INTER_TKTF-1:   4.9369639397945551E-007   9.6227410899593665E-007   2.5317582606008999E-007   5.1910317636662478E-007  -0.0000000000000000        0.0000000000000000
## KICKPATHR:TIME= T EXACT= T BETA0=  0.99999986944003005      YL=  0.50000000000000000
## INTER_TKTF-2:   4.9369639397974308E-007   9.6227410899593665E-007   2.5317582606024516E-007   5.1910317636662478E-007  -2.9887203822909214E-013   0.0000000000000000
## KICKTKT7R:DIR=           1 CHG=   1.0000000000000000      BETA0=  0.99999986944003005      B0=   0.0000000000000000      BN2=  0.30372411069999999      YL=   1.0000000000000000
## KICKTKT7R-TRACE-1:   9.6227410899593665E-007   2.9887203822909214E-013
## KICKTKT7R-TRACE-2:   9.6227410899593665E-007   5.1910317636662478E-007   7.6895602620885845E-008   1.4994749821729430E-007
## EXPR1:   0.0000000000000000
## EXPR2:   0.0000000000000000
## INTER_TKTF-3:   4.9369639397974308E-007   9.6227410899593665E-007   2.5317582606024516E-007   5.1910317636662478E-007  -2.9887203822909214E-013   0.0000000000000000
## KICKPATHR:TIME= T EXACT= T BETA0=  0.99999986944003005      YL=  0.50000000000000000
## INTER_TKTF-4:   4.9369639398003064E-007   9.6227410899593665E-007   2.5317582606040033E-007   5.1910317636662478E-007  -5.9774407645818428E-013   0.0000000000000000
## PUSHTKT7R:TIME= T DIR=           1 CHG=   1.0000000000000000      BETA0=  0.99999986944003005
## INTER_TKTF-5:   9.5014251526272852E-007   8.5194292168776174E-007   5.2569750194846942E-007   5.7787243085572462E-007  -5.9774407645818428E-013   0.0000000000000000

## INTER_TKTF:L=   1.0000000000000000      NST=           1 POS=           1
## INTER_TKTF-0:   4.3579142020155810E-006   8.5194292168776174E-007   2.8371872253725927E-006   5.7787243085572462E-007  -2.7178259642823832E-012   0.0000000000000000
## PUSHTKT7R:TIME= T DIR=           1 CHG=   1.0000000000000000      BETA0=  0.99999986944003005
## INTER_TKTF-1:   4.9557969151077180E-006   1.5547014309301587E-006   3.0154453446436791E-006   1.3064255209656922E-007  -2.7178259642823832E-012   0.0000000000000000
## KICKPATHR:TIME= T EXACT= T BETA0=  0.99999986944003005      YL=  0.50000000000000000
## INTER_TKTF-2:   4.9557969151086641E-006   1.5547014309301587E-006   3.0154453446437587E-006   1.3064255209656922E-007  -3.3264502263818940E-012   0.0000000000000000
## KICKTKT7R:DIR=           1 CHG=   1.0000000000000000      BETA0=  0.99999986944003005      B0=   0.0000000000000000      BN2= -0.30372411069999999      YL=   1.0000000000000000
## KICKTKT7R-TRACE-1:   1.5547014309301587E-006   3.3264502263818940E-012
## KICKTKT7R-TRACE-2:   1.5547014309301587E-006   1.3064255209656922E-007  -9.1586345566638060E-007  -1.5051950108511825E-006
## EXPR1:   0.0000000000000000
## EXPR2:   0.0000000000000000
## INTER_TKTF-3:   4.9557969151086641E-006   1.5547014309301587E-006   3.0154453446437587E-006   1.3064255209656922E-007  -3.3264502263818940E-012   0.0000000000000000
## KICKPATHR:TIME= T EXACT= T BETA0=  0.99999986944003005      YL=  0.50000000000000000
## INTER_TKTF-4:   4.9557969151096103E-006   1.5547014309301587E-006   3.0154453446438383E-006   1.3064255209656922E-007  -3.9350744884814048E-012   0.0000000000000000
## PUSHTKT7R:TIME= T DIR=           1 CHG=   1.0000000000000000      BETA0=  0.99999986944003005
## INTER_TKTF-5:   5.9323654782277321E-006   2.3762588827028579E-006   2.9661827391134446E-006  -3.2644454002438556E-007  -3.9350744884814048E-012   0.0000000000000000


track_quadrupole  mqf mth=  simple  l=  1 sdir= 1 tdir= 1 beta0=  0.99999986944003

quad_drift-0: 0.5 0 1e-06 0 5e-07 0 0
quad_drift-1: 0.5 4.9369639397946e-07 9.6227410899594e-07 2.5317582606009e-07 5.1910317636662e-07 0 0
## INTER_TKTF-0:   0.0000000000000000        9.9999999999999995E-007   0.0000000000000000        4.9999999999999998E-007  -0.0000000000000000        0.0000000000000000
## INTER_TKTF-1:   4.9369639397945551E-007   9.6227410899593665E-007   2.5317582606008999E-007   5.1910317636662478E-007  -0.0000000000000000        0.0000000000000000

drift_adj-0:  0.5 4.9369639397946e-07 9.6227410899594e-07 2.5317582606009e-07 5.1910317636662e-07 0 0
drift_adj-1:  0.5 4.9369639397974e-07 9.6227410899594e-07 2.5317582606025e-07 5.1910317636662e-07 -2.9887203822909e-13  0
## INTER_TKTF-1:   4.9369639397945551E-007   9.6227410899593665E-007   2.5317582606008999E-007   5.1910317636662478E-007  -0.0000000000000000        0.0000000000000000
## INTER_TKTF-2:   4.9369639397974308E-007   9.6227410899593665E-007   2.5317582606024516E-007   5.1910317636662478E-007  -2.9887203822909214E-013   0.0000000000000000

quad_kick-0:  1 4.9369639397974e-07 9.6227410899594e-07 2.5317582606025e-07 5.1910317636662e-07 -2.9887203822909e-13  0
quad_kick-1:  1 4.9369639397974e-07 9.6227410899594e-07 2.5317582606025e-07 5.1910317636662e-07 -2.9887203822909e-13  0
## INTER_TKTF-2:   4.9369639397974308E-007   9.6227410899593665E-007   2.5317582606024516E-007   5.1910317636662478E-007  -2.9887203822909214E-013   0.0000000000000000
## INTER_TKTF-3:   4.9369639397974308E-007   9.6227410899593665E-007   2.5317582606024516E-007   5.1910317636662478E-007  -2.9887203822909214E-013   0.0000000000000000

drift_adj-0:  0.5 4.9369639397974e-07 9.6227410899594e-07 2.5317582606025e-07 5.1910317636662e-07 -2.9887203822909e-13  0
drift_adj-1:  0.5 4.9369639398003e-07 9.6227410899594e-07 2.531758260604e-07  5.1910317636662e-07 -5.9774407645818e-13  0
## INTER_TKTF-3:   4.9369639397974308E-007   9.6227410899593665E-007   2.5317582606024516E-007   5.1910317636662478E-007  -2.9887203822909214E-013   0.0000000000000000
## INTER_TKTF-4:   4.9369639398003064E-007   9.6227410899593665E-007   2.5317582606040033E-007   5.1910317636662478E-007  -5.9774407645818428E-013   0.0000000000000000

quad_drift-0: 0.5  4.9369639398003e-07       9.6227410899594e-07       2.531758260604e-07        5.1910317636662e-07      -5.9774407645818e-13  0
quad_drift-1: 0.5  9.5014251526273e-07       7.9164562713657e-07       5.2569750194847e-07       6.0958653027097e-07      -5.9774407645818e-13  0
## INTER_TKTF-4:   4.9369639398003064E-007   9.6227410899593665E-007   2.5317582606040033E-007   5.1910317636662478E-007  -5.9774407645818428E-013   0.0000000000000000
## INTER_TKTF-5:   9.5014251526272852E-007   8.5194292168776174E-007   5.2569750194846942E-007   5.7787243085572462E-007  -5.9774407645818428E-013   0.0000000000000000


track_quadrupole  mqd mth=  simple  l=  1 sdir= 1 tdir= 1 beta0=  0.99999986944003
quad_drift-0: 0.5 4.1167250238106e-06 7.9164562713657e-07 2.9640436230336e-06 6.0958653027097e-07 -2.5943691639441e-12  0
quad_drift-1: 0.5 4.6748611433704e-06 -3.2690662467865e-07  3.1531731081929e-06 1.3930518406985e-06 -2.5943691639441e-12  0
drift_adj-0:  0.5 4.6748611433704e-06 -3.2690662467865e-07  3.1531731081929e-06 1.3930518406985e-06 -2.5943691639441e-12  0
drift_adj-1:  0.5 4.6748611433702e-06 -3.2690662467865e-07  3.1531731081937e-06 1.3930518406985e-06 -3.1062930005987e-12  0
quad_kick-0:  1 4.6748611433702e-06 -3.2690662467865e-07  3.1531731081937e-06 1.3930518406985e-06 -3.1062930005987e-12  0
quad_kick-1:  1 4.6748611433702e-06 -3.2690662467865e-07  3.1531731081937e-06 1.3930518406985e-06 -3.1062930005987e-12  0
drift_adj-0:  0.5 4.6748611433702e-06 -3.2690662467865e-07  3.1531731081937e-06 1.3930518406985e-06 -3.1062930005987e-12  0
drift_adj-1:  0.5 4.6748611433701e-06 -3.2690662467865e-07  3.1531731081944e-06 1.3930518406985e-06 -3.6182168372534e-12  0
quad_drift-0: 0.5 4.6748611433701e-06 -3.2690662467865e-07  3.1531731081944e-06 1.3930518406985e-06 -3.6182168372534e-12  0
quad_drift-1: 0.5 4.6879408276976e-06 -1.6439460910844e-06  3.721961513577e-06  2.1984189265365e-06 -3.6182168372534e-12  0
