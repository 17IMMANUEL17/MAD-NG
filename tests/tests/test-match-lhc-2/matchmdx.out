
  ++++++++++++++++++++++++++++++++++++++++++++
  +     MAD-X 5.05.02  (64 bit, Darwin)      +
  + Support: mad@cern.ch, http://cern.ch/mad +
  + Release   date: 2019.07.25               +
  + Execution date: 2020.05.04 19:08:45      +
  ++++++++++++++++++++++++++++++++++++++++++++
! time ../../madx64 testmatch.madx > matchmdx.out 2>&1



!---|----1----|----2----|----3----|----4----|----5----|----6----|----7----|---8;

Option,  -warn,info;



Title, "Matching an insertion of the LHC 6.5 lattice with MADX";



!---------------------------------------------------------------;

!           CALL IN SELECTION, SEQUENCE and OPTICS FILES;

!---------------------------------------------------------------;

option, -echo;



Beam, particle = proton, sequence=lhcb1, energy = 7000.0;

Beam, particle = proton, sequence=lhcb2, energy = 7000.0;

! the 'bv' parameter indicates that beam2 rotates counter-clockwise



! select IR8 of beam1:

call,file="toolkit/select.ir8.b1.madx";

doplot(iii): macro = {

  write,table=twiss,file="output/twissiii.dat";

  plot, haxis=s, vaxis1={betx,bety}, vaxis2={mux,muy}, interpolate, colour=100;

  plot, haxis=s, vaxis1={betx,bety}, vaxis2={dx,dpx} , interpolate, colour=100;

}



! TWISS1

use, period=lhcb1, range = S.CELL.78.B1/E.CELL.78.B1;

savebeta, label = bini1ir8, place = S.CELL.78.B1;

twiss, sequence=lhcb1;

enter Twiss module
  
iteration:   1 error:   0.000000E+00 deltap:   0.000000E+00
orbit:   0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
       106.9029682                 -0    0.0004056569002        49.65015014 

                q1                dq1            betxmax              dxmax 
      0.2634908042      -0.4834633103        176.9450877        2.008259336 

             dxrms             xcomax             xcorms                 q2 
       1.535889531                  0                  0       0.2430746761 

               dq2            betymax              dymax              dyrms 
      0.5617650541        180.2369084                 -0                  0 

            ycomax             ycorms             deltap            synch_1 
                 0                  0                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 

            nflips 
                 0 
show, bini1ir8;

command: beta0  module: control
parameter: betx   double value:        168.7188694
parameter: alfx   double value:        2.407088013
parameter: mux   double value:                  0
parameter: bety   double value:        35.09214899
parameter: alfy   double value:       -0.571406758
parameter: muy   double value:                  0
parameter: x   double value:                  0
parameter: px   double value:                  0
parameter: y   double value:                  0
parameter: py   double value:                  0
parameter: t   double value:                  0
parameter: pt   double value:                  0
parameter: dx   double value:        1.960763171
parameter: dpx   double value:     -0.02818763508
parameter: dy   double value:                 -0
parameter: dpy   double value:                 -0
parameter: wx   double value:                  0
parameter: phix   double value:                  0
parameter: dmux   double value:                  0
parameter: wy   double value:                  0
parameter: phiy   double value:                  0
parameter: dmuy   double value:                  0
parameter: ddx   double value:                  0
parameter: ddpx   double value:                  0
parameter: ddy   double value:                  0
parameter: ddpy   double value:                  0
parameter: r11   double value:                  0
parameter: r12   double value:                  0
parameter: r21   double value:                  0
parameter: r22   double value:                  0
parameter: energy   double value:               7000
exec, doplot(1);

Plot - default table plotted: twiss

 GXPLOT-X11  1.50 initialized

 plot number =            1
Plot - default table plotted: twiss
 plot number =            2


bini1ir8->mux = 0;

bini1ir8->muy = 0;



! TWISS2

use, period=lhcb1, range = S.CELL.81.B1/E.CELL.81.B1;

savebeta, label = bini2ir8, place = E.CELL.81.B1;

twiss, sequence=lhcb1;

enter Twiss module
  
iteration:   1 error:   0.000000E+00 deltap:   0.000000E+00
orbit:   0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
       106.8970318                 -0    0.0004057041854        49.64725667 

                q1                dq1            betxmax              dxmax 
      0.2634717773       0.5807149294        176.9293486        2.008338793 

             dxrms             xcomax             xcorms                 q2 
       1.464873301                  0                  0       0.2430568194 

               dq2            betymax              dymax              dyrms 
      0.3575647037        180.2234757                 -0                  0 

            ycomax             ycorms             deltap            synch_1 
                 0                  0                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 

            nflips 
                 0 
show, bini2ir8;

command: beta0  module: control
parameter: betx   double value:        31.41551976
parameter: alfx   double value:      -0.5152452573
parameter: mux   double value:       0.2634717773
parameter: bety   double value:        172.2062298
parameter: alfy   double value:        2.347159372
parameter: muy   double value:       0.2430568194
parameter: x   double value:                  0
parameter: px   double value:                  0
parameter: y   double value:                  0
parameter: py   double value:                  0
parameter: t   double value:                  0
parameter: pt   double value:                  0
parameter: dx   double value:       0.9957580121
parameter: dpx   double value:      0.01289651951
parameter: dy   double value:                  0
parameter: dpy   double value:                  0
parameter: wx   double value:                  0
parameter: phix   double value:                  0
parameter: dmux   double value:                  0
parameter: wy   double value:                  0
parameter: phiy   double value:                  0
parameter: dmuy   double value:                  0
parameter: ddx   double value:                  0
parameter: ddpx   double value:                  0
parameter: ddy   double value:                  0
parameter: ddpy   double value:                  0
parameter: r11   double value:                 -0
parameter: r12   double value:                 -0
parameter: r21   double value:                 -0
parameter: r22   double value:                 -0
parameter: energy   double value:               7000
exec, doplot(2);

Plot - default table plotted: twiss
 plot number =            3
Plot - default table plotted: twiss
 plot number =            4


! TWISS3

use, period=lhcb1, range = S.CELL.78.B1/S.DS.L8.B1;

savebeta, label = bir8b1, place = S.DS.L8.B1;

twiss, sequence=lhcb1, beta0 = bini1ir8;

enter Twiss module
 Found 6 initial orbit vector values from twiss command. 
  
open line - error with deltap:   0.000000E+00
initial orbit vector:   0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00
final orbit vector:     0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
       1276.365618                 -0                  0                  0 

                q1                dq1            betxmax              dxmax 
       3.156036922                  0        176.9450877        2.008259336 

             dxrms             xcomax             xcorms                 q2 
       1.505261214                  0                  0         2.88612878 

               dq2            betymax              dymax              dyrms 
                 0        180.2369084                  0                  0 

            ycomax             ycorms             deltap            synch_1 
                 0                  0                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 

            nflips 
                 0 
show, bir8b1;

command: beta0  module: control
parameter: betx   double value:        168.7188694
parameter: alfx   double value:       -2.407088013
parameter: mux   double value:        3.156036922
parameter: bety   double value:        35.09214899
parameter: alfy   double value:        0.571406758
parameter: muy   double value:         2.88612878
parameter: x   double value:                  0
parameter: px   double value:                  0
parameter: y   double value:                  0
parameter: py   double value:                  0
parameter: t   double value:                  0
parameter: pt   double value:                  0
parameter: dx   double value:        1.960763171
parameter: dpx   double value:      0.02818763508
parameter: dy   double value:                  0
parameter: dpy   double value:                  0
parameter: wx   double value:                  0
parameter: phix   double value:                  0
parameter: dmux   double value:                  0
parameter: wy   double value:                  0
parameter: phiy   double value:                  0
parameter: dmuy   double value:                  0
parameter: ddx   double value:                  0
parameter: ddpx   double value:                  0
parameter: ddy   double value:                  0
parameter: ddpy   double value:                  0
parameter: r11   double value:                 -0
parameter: r12   double value:                 -0
parameter: r21   double value:                 -0
parameter: r22   double value:                 -0
parameter: energy   double value:               7000
exec, doplot(3);

Plot - default table plotted: twiss
 plot number =            5
Plot - default table plotted: twiss
 plot number =            6


bir8b1->mux = 0;

bir8b1->muy = 0;



! TWISS4

seqedit, sequence=lhcb1;

reflect;

endedit;

++++++ info: seqedit - number of elements installed:  0
++++++ info: seqedit - number of elements moved:      0
++++++ info: seqedit - number of elements removed:    0
++++++ info: seqedit - number of elements replaced:   0


bini1ir8->betx =  bini2ir8->betx;

bini1ir8->bety =  bini2ir8->bety;

bini1ir8->alfx = -bini2ir8->alfx;

bini1ir8->alfy = -bini2ir8->alfy;

bini1ir8->dx   =  bini2ir8->dx;

bini1ir8->dpx  = -bini2ir8->dpx;

bini1ir8->mux  =  0;

bini1ir8->muy  =  0;

show, bini1ir8;

command: beta0  module: control
parameter: betx   double value:        31.41551976
parameter: alfx   double value:       0.5152452573
parameter: mux   double value:                  0
parameter: bety   double value:        172.2062298
parameter: alfy   double value:       -2.347159372
parameter: muy   double value:                  0
parameter: x   double value:                  0
parameter: px   double value:                  0
parameter: y   double value:                  0
parameter: py   double value:                  0
parameter: t   double value:                  0
parameter: pt   double value:                  0
parameter: dx   double value:       0.9957580121
parameter: dpx   double value:     -0.01289651951
parameter: dy   double value:                 -0
parameter: dpy   double value:                 -0
parameter: wx   double value:                  0
parameter: phix   double value:                  0
parameter: dmux   double value:                  0
parameter: wy   double value:                  0
parameter: phiy   double value:                  0
parameter: dmuy   double value:                  0
parameter: ddx   double value:                  0
parameter: ddpx   double value:                  0
parameter: ddy   double value:                  0
parameter: ddpy   double value:                  0
parameter: r11   double value:                  0
parameter: r12   double value:                  0
parameter: r21   double value:                  0
parameter: r22   double value:                  0
parameter: energy   double value:               7000


use, period=lhcb1, range = E.CELL.81.B1/E.DS.R8.B1;

savebeta, label = eir8b1, place = E.DS.R8.B1;

twiss, sequence=lhcb1, beta0=bini1ir8;

enter Twiss module
 Found 6 initial orbit vector values from twiss command. 
  
open line - error with deltap:   0.000000E+00
initial orbit vector:   0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00
final orbit vector:     0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
       1068.970318                 -0                  0                  0 

                q1                dq1            betxmax              dxmax 
       2.634717773                  0        176.9293486        2.008338793 

             dxrms             xcomax             xcorms                 q2 
       1.482205469                  0                  0        2.430568194 

               dq2            betymax              dymax              dyrms 
                 0        180.2234757                  0                  0 

            ycomax             ycorms             deltap            synch_1 
                 0                  0                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 

            nflips 
                 0 
show, eir8b1;

command: beta0  module: control
parameter: betx   double value:        31.41551976
parameter: alfx   double value:       0.5152452573
parameter: mux   double value:        2.634717773
parameter: bety   double value:        172.2062298
parameter: alfy   double value:       -2.347159372
parameter: muy   double value:        2.430568194
parameter: x   double value:                  0
parameter: px   double value:                  0
parameter: y   double value:                  0
parameter: py   double value:                  0
parameter: t   double value:                  0
parameter: pt   double value:                  0
parameter: dx   double value:       0.9957580121
parameter: dpx   double value:     -0.01289651951
parameter: dy   double value:                  0
parameter: dpy   double value:                  0
parameter: wx   double value:                  0
parameter: phix   double value:                  0
parameter: dmux   double value:                  0
parameter: wy   double value:                  0
parameter: phiy   double value:                  0
parameter: dmuy   double value:                  0
parameter: ddx   double value:                  0
parameter: ddpx   double value:                  0
parameter: ddy   double value:                  0
parameter: ddpy   double value:                  0
parameter: r11   double value:                 -0
parameter: r12   double value:                 -0
parameter: r21   double value:                 -0
parameter: r22   double value:                 -0
parameter: energy   double value:               7000
exec, doplot(4);

Plot - default table plotted: twiss
 plot number =            7
Plot - default table plotted: twiss
 plot number =            8


eir8b1->mux  = muxip8;

eir8b1->muy  = muyip8;

eir8b1->alfx = -eir8b1->alfx;

eir8b1->alfy = -eir8b1->alfy;

eir8b1->dpx  = -eir8b1->dpx;

eir8b1->dpy  = -eir8b1->dpy;

show, eir8b1;

command: beta0  module: control
parameter: betx   double value:        31.41551976
parameter: alfx   double value:      -0.5152452573
parameter: mux   double value:                  0
parameter: bety   double value:        172.2062298
parameter: alfy   double value:        2.347159372
parameter: muy   double value:                  0
parameter: x   double value:                  0
parameter: px   double value:                  0
parameter: y   double value:                  0
parameter: py   double value:                  0
parameter: t   double value:                  0
parameter: pt   double value:                  0
parameter: dx   double value:       0.9957580121
parameter: dpx   double value:      0.01289651951
parameter: dy   double value:                  0
parameter: dpy   double value:                  0
parameter: wx   double value:                  0
parameter: phix   double value:                  0
parameter: dmux   double value:                  0
parameter: wy   double value:                  0
parameter: phiy   double value:                  0
parameter: dmuy   double value:                  0
parameter: ddx   double value:                  0
parameter: ddpx   double value:                  0
parameter: ddy   double value:                  0
parameter: ddpy   double value:                  0
parameter: r11   double value:                 -0
parameter: r12   double value:                 -0
parameter: r21   double value:                 -0
parameter: r22   double value:                 -0
parameter: energy   double value:               7000


seqedit, sequence=lhcb1;

reflect;

endedit;

++++++ info: seqedit - number of elements installed:  0
++++++ info: seqedit - number of elements moved:      0
++++++ info: seqedit - number of elements removed:    0
++++++ info: seqedit - number of elements replaced:   0




! TWISS5

use, period=lhcb1, range = S.DS.L8.B1/E.DS.R8.B1;

savebeta, label = bip8b1, place = IP8;

twiss, sequence=lhcb1, beta0=bir8b1;

enter Twiss module
 Found 6 initial orbit vector values from twiss command. 
  
open line - error with deltap:   0.000000E+00
initial orbit vector:   0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00
final orbit vector:    -3.446111E-09  8.180880E-12 -9.779835E-11  6.328585E-13  8.075242E-06  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
         1093.4994                 -0                  0                  0 

                q1                dq1            betxmax              dxmax 
       3.182999956                  0        320.6260502        2.434492142 

             dxrms             xcomax             xcorms                 q2 
      0.9473646359       0.0114100371     0.003488409464        2.974000003 

               dq2            betymax              dymax              dyrms 
                 0        269.9919818      0.01703724465      0.00606528885 

            ycomax             ycorms             deltap            synch_1 
    0.003038356415    0.0007819606128                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 

            nflips 
                 0 
show, bip8b1;

command: beta0  module: control
parameter: betx   double value:        10.00000345
parameter: alfx   double value:    6.233964272e-08
parameter: mux   double value:        1.663156687
parameter: bety   double value:        9.999998272
parameter: alfy   double value:    4.058119698e-07
parameter: muy   double value:        1.355453362
parameter: x   double value:     2.15960652e-09
parameter: px   double value:   -0.0001000119507
parameter: y   double value:    -0.002000000001
parameter: py   double value:    1.809739855e-06
parameter: t   double value:    6.602946363e-06
parameter: pt   double value:                  0
parameter: dx   double value:      0.01538974113
parameter: dpx   double value:    0.0002782167299
parameter: dy   double value:    -0.004535553658
parameter: dpy   double value:   -0.0001465961221
parameter: wx   double value:                  0
parameter: phix   double value:                  0
parameter: dmux   double value:                  0
parameter: wy   double value:                  0
parameter: phiy   double value:                  0
parameter: dmuy   double value:                  0
parameter: ddx   double value:                  0
parameter: ddpx   double value:                  0
parameter: ddy   double value:                  0
parameter: ddpy   double value:                  0
parameter: r11   double value:    3.025740147e-10
parameter: r12   double value:   -3.622608018e-09
parameter: r21   double value:   -9.273533499e-10
parameter: r22   double value:    1.112626255e-08
parameter: energy   double value:               7000
exec, doplot(5);

Plot - default table plotted: twiss
 plot number =            9
Plot - default table plotted: twiss
 plot number =           10


Use, period=lhcb1, range = S.DS.L8.B1/E.DS.R8.B1;



return;

call,file="toolkit/twissini.ir8.b1.madx";

SELECT, FLAG=TWISS,clear;

SELECT, FLAG=TWISS,column=name,s,betx,bety,alfx,alfy,dx,dpx,x,px,y,py,mux,muy;

TWISS,sequence=lhcb1,file=twiss.ir8.b1.data,beta0=bir8b1,save;

enter Twiss module
 Found 6 initial orbit vector values from twiss command. 
  
open line - error with deltap:   0.000000E+00
initial orbit vector:   0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00
final orbit vector:    -3.446111E-09  8.180880E-12 -9.779835E-11  6.328585E-13  8.075242E-06  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
         1093.4994                 -0                  0                  0 

                q1                dq1            betxmax              dxmax 
       3.182999956                  0        320.6260502        2.434492142 

             dxrms             xcomax             xcorms                 q2 
      0.9473646359       0.0114100371     0.003488409464        2.974000003 

               dq2            betymax              dymax              dyrms 
                 0        269.9919818      0.01703724465      0.00606528885 

            ycomax             ycorms             deltap            synch_1 
    0.003038356415    0.0007819606128                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 

            nflips 
                 0 
!System,"cat twiss.ir8.b1.data";

return;



! Create table for storing data

n=0;

create,table=str.ip8.b1,column=n,kq4.l8b1, kq5.l8b1, kq6.l8b1, kq7.l8b1, kq8.l8b1, kq9.l8b1, kq10.l8b1, kqtl11.l8b1, kqt12.l8b1, kqt13.l8b1,kq4.r8b1, kq5.r8b1, kq6.r8b1, kq7.r8b1, kq8.r8b1, kq9.r8b1, kq10.r8b1, kqtl11.r8b1, kqt12.r8b1, kqt13.r8b1,beta.ip8,tar;



! fill the table

fill,table=str.ip8.b1;



! set match variables

muxip8 := 3.204; ! Horizontal phase advance over IR8

muyip8 := 2.804; ! Vertical phase advance over IR8

scale := 23348.89927;

qtlimit1 := 1.0*220.0/scale;

qtlimit2 := 1.0*200.0/scale;

qtlimit3 := 1.0*130.0/scale;

qtlimit4 := 1.0*160.0/scale;



show, bir8b1;

command: beta0  module: control
parameter: betx   double value:        168.7188694
parameter: alfx   double value:       -2.407088013
parameter: mux   double value:                  0
parameter: bety   double value:        35.09214899
parameter: alfy   double value:        0.571406758
parameter: muy   double value:                  0
parameter: x   double value:                  0
parameter: px   double value:                  0
parameter: y   double value:                  0
parameter: py   double value:                  0
parameter: t   double value:                  0
parameter: pt   double value:                  0
parameter: dx   double value:        1.960763171
parameter: dpx   double value:      0.02818763508
parameter: dy   double value:                  0
parameter: dpy   double value:                  0
parameter: wx   double value:                  0
parameter: phix   double value:                  0
parameter: dmux   double value:                  0
parameter: wy   double value:                  0
parameter: phiy   double value:                  0
parameter: dmuy   double value:                  0
parameter: ddx   double value:                  0
parameter: ddpx   double value:                  0
parameter: ddy   double value:                  0
parameter: ddpy   double value:                  0
parameter: r11   double value:                 -0
parameter: r12   double value:                 -0
parameter: r21   double value:                 -0
parameter: r22   double value:                 -0
parameter: energy   double value:               7000
show, eir8b1;

command: beta0  module: control
parameter: betx   double value:        31.41551976
parameter: alfx   double value:      -0.5152452573
parameter: mux   double value:                  0
parameter: bety   double value:        172.2062298
parameter: alfy   double value:        2.347159372
parameter: muy   double value:                  0
parameter: x   double value:                  0
parameter: px   double value:                  0
parameter: y   double value:                  0
parameter: py   double value:                  0
parameter: t   double value:                  0
parameter: pt   double value:                  0
parameter: dx   double value:       0.9957580121
parameter: dpx   double value:      0.01289651951
parameter: dy   double value:                  0
parameter: dpy   double value:                  0
parameter: wx   double value:                  0
parameter: phix   double value:                  0
parameter: dmux   double value:                  0
parameter: wy   double value:                  0
parameter: phiy   double value:                  0
parameter: dmuy   double value:                  0
parameter: ddx   double value:                  0
parameter: ddpx   double value:                  0
parameter: ddy   double value:                  0
parameter: ddpy   double value:                  0
parameter: r11   double value:                 -0
parameter: r12   double value:                 -0
parameter: r21   double value:                 -0
parameter: r22   double value:                 -0
parameter: energy   double value:               7000


option, -info, debug;



tar=0;

ncall=0;

while( n < 2 ) {  ! tar < 1E-10 ) {

n=n+1;

beta.ip8=beta.ip8*.6;

match, use_macro;

vary,name=KQ4.L8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ5.L8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ6.L8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ7.L8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ8.L8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ9.L8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ10.L8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQTL11.L8B1,step=1.0e-6,LOWER=-qtlimit3,UPPER=qtlimit3;

vary,name=KQT12.L8B1,step=1.0e-6,LOWER=-qtlimit3,UPPER=qtlimit3;

vary,name=KQT13.L8B1,step=1.0e-6,LOWER=-qtlimit3,UPPER=qtlimit3;



vary,name=KQ4.R8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ5.R8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ6.R8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ7.R8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ8.R8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ9.R8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQ10.R8B1,step=1.0e-6,LOWER=-qtlimit2,UPPER=qtlimit2;

vary,name=KQTL11.R8B1,step=1.0e-6,LOWER=-qtlimit3,UPPER=qtlimit3;

vary,name=KQT12.R8B1,step=1.0e-6,LOWER=-qtlimit3,UPPER=qtlimit3;

vary,name=KQT13.R8B1,step=1.0e-6,LOWER=-qtlimit3,UPPER=qtlimit3;



m1: macro = {

  ncall=ncall+1;

  option, -debug;

  twiss,sequence=lhcb1,beta0=bir8b1;

  option,  debug;

}



constraint, expr = table(twiss,ip8,betx) = beta.ip8;

constraint, expr = table(twiss,ip8,bety) = beta.ip8;

constraint, expr = table(twiss,ip8,alfx) = 0;

constraint, expr = table(twiss,ip8,alfy) = 0;

constraint, expr = table(twiss,ip8,dx  ) = 0;

constraint, expr = table(twiss,ip8,dpx ) = 0;



constraint, expr = table(twiss,e.ds.r8.b1,alfx) = eir8b1->alfx;

constraint, expr = table(twiss,e.ds.r8.b1,alfy) = eir8b1->alfy;

constraint, expr = table(twiss,e.ds.r8.b1,betx) = eir8b1->betx;

constraint, expr = table(twiss,e.ds.r8.b1,bety) = eir8b1->bety;

constraint, expr = table(twiss,e.ds.r8.b1,dx  ) = eir8b1->dx ;

constraint, expr = table(twiss,e.ds.r8.b1,dpx ) = eir8b1->dpx;

constraint, expr = table(twiss,e.ds.r8.b1,mux ) = muxip8;

constraint, expr = table(twiss,e.ds.r8.b1,muy ) = muyip8;



jacobian,calls=30,tolerance=1.e-24;

endmatch;



fill,table=str.ip8.b1;

value, ncall;

};

number of variables:    20
user given constraints: 0
total constraints:      14

START JACOBIAN:

 JACOBIAN Strategy =           3
Initial Penalty Function =   0.3203489945694948E+02


 Current variables values
    1 -0.431524405700E-02
    2  0.528621334000E-02
    3 -0.510285981600E-02
    4  0.825167901800E-02
    5 -0.585527603800E-02
    6  0.707112584600E-02
    7 -0.639311396800E-02
    8  0.707397566500E-03
    9 -0.308649738200E-02
   10  0.378542971300E-02
   11  0.439728023700E-02
   12 -0.421383034900E-02
   13  0.405914341200E-02
   14 -0.665980840100E-02
   15  0.692570581200E-02
   16 -0.746154381400E-02
   17  0.755572696000E-02
   18 -0.478965620900E-02
   19 -0.174209868300E-02
   20 -0.361437593700E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    115196.29883099129     
 exclude parameter:kqt13.l8b1                                      hit maximum
 exclude parameter:kqtl11.r8b1                                     hit minimum
 Reset system to           14 con,          18 var
 Solve system with           14 con,          18 var
 Rank            14   Condition number    211811.72624921441     
 exclude parameter:kq7.l8b1                                        hit maximum
 exclude parameter:kqt12.r8b1                                      hit minimum
 Reset system to           14 con,          18 var
 Solve system with           14 con,          16 var
 Rank            14   Condition number    593438.90478547965     
 exclude parameter:kq8.l8b1                                        hit minimum
 exclude parameter:kq9.l8b1                                        hit maximum
 exclude parameter:kq10.l8b1                                       hit minimum
 exclude parameter:kqt12.l8b1                                      hit maximum
 Reset system to           14 con,          16 var
 Too var to exclude, set strategy=1
 Step length    233.32509383420825     
 Bisec iteration            3
call:     2 Dx =   0.23332509E+03  Penalty function =  0.3203489945694948E+02
 Current variables values
    1 -0.431524405700E-02
    2  0.528621334000E-02
    3 -0.510285981600E-02
    4  0.825167901800E-02
    5 -0.585527603800E-02
    6  0.707112584600E-02
    7 -0.639311396800E-02
    8  0.707397566500E-03
    9 -0.308649738200E-02
   10  0.378542971300E-02
   11  0.439728023700E-02
   12 -0.421383034900E-02
   13  0.405914341200E-02
   14 -0.665980840100E-02
   15  0.692570581200E-02
   16 -0.746154381400E-02
   17  0.755572696000E-02
   18 -0.478965620900E-02
   19 -0.174209868300E-02
   20 -0.361437593700E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    115196.29883099129     
reset parameter: kqt13.l8b1              from  0.64035039E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.57471124E-02  to -0.55657143E-02
 Step length   0.13349473664470526     
 Bisec iteration            3
call:     3 Dx =   0.13308077E+00  Penalty function =  0.2582741571660630E+02
 Current variables values
    1 -0.429494685423E-02
    2  0.528011666963E-02
    3 -0.509998844115E-02
    4  0.823187470144E-02
    5 -0.583228827912E-02
    6  0.711423919897E-02
    7 -0.635635357314E-02
    8  0.714032408553E-03
    9 -0.304002971592E-02
   10  0.400796528448E-02
   11  0.439361025659E-02
   12 -0.412779631259E-02
   13  0.406655552435E-02
   14 -0.656469474206E-02
   15  0.684114899142E-02
   16 -0.746569093748E-02
   17  0.754907658340E-02
   18 -0.488666346848E-02
   19 -0.184027556901E-02
   20 -0.358713907187E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    116139.80815893479     
reset parameter: kqt13.l8b1              from  0.67538983E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.57107971E-02  to -0.55657143E-02
 Step length   0.13216425488673531     
 Bisec iteration            2
call:     4 Dx =   0.13204766E+00  Penalty function =  0.1718738323729035E+02
 Current variables values
    1 -0.425759751570E-02
    2  0.527345345199E-02
    3 -0.507822573121E-02
    4  0.818844265705E-02
    5 -0.578364425647E-02
    6  0.719541036513E-02
    7 -0.625630611890E-02
    8  0.719417358863E-03
    9 -0.294362533355E-02
   10  0.439740253456E-02
   11  0.436403826650E-02
   12 -0.397424614344E-02
   13  0.407863285870E-02
   14 -0.642751704119E-02
   15  0.672672432155E-02
   16 -0.750770929524E-02
   17  0.754193634424E-02
   18 -0.505642617256E-02
   19 -0.201361855292E-02
   20 -0.352901692802E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    120739.00629299985     
reset parameter: kqt13.l8b1              from  0.71194754E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.56425383E-02  to -0.55657143E-02
 Step length   0.12363221425042159     
 Bisec iteration            2
call:     5 Dx =   0.12370251E+00  Penalty function =  0.1140883080980899E+02
 Current variables values
    1 -0.423846982592E-02
    2  0.527518190411E-02
    3 -0.503974562127E-02
    4  0.814552396525E-02
    5 -0.574518010723E-02
    6  0.726086568645E-02
    7 -0.612644334316E-02
    8  0.709025619419E-03
    9 -0.285052171074E-02
   10  0.468948047212E-02
   11  0.431620419370E-02
   12 -0.386038529743E-02
   13  0.409261043269E-02
   14 -0.637711168273E-02
   15  0.668600326290E-02
   16 -0.756502719653E-02
   17  0.754061331679E-02
   18 -0.518374820062E-02
   19 -0.212364298782E-02
   20 -0.346315479701E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    121954.04219387536     
reset parameter: kqt13.l8b1              from  0.72535395E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.56571464E-02  to -0.55657143E-02
 Step length   0.11405704944322723     
 Bisec iteration            3
call:     6 Dx =   0.11412835E+00  Penalty function =  0.1022279144205309E+02
 Current variables values
    1 -0.423873499769E-02
    2  0.527845443788E-02
    3 -0.502149270038E-02
    4  0.812813708946E-02
    5 -0.573697130913E-02
    6  0.728639775978E-02
    7 -0.606375636951E-02
    8  0.699996115705E-03
    9 -0.280726595188E-02
   10  0.479900969870E-02
   11  0.429131343356E-02
   12 -0.381524455733E-02
   13  0.409948167925E-02
   14 -0.636654357938E-02
   15  0.668213800913E-02
   16 -0.758814801263E-02
   17  0.754100476761E-02
   18 -0.523149396114E-02
   19 -0.215070930315E-02
   20 -0.342614638626E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    123336.09221846171     
reset parameter: kqt13.l8b1              from  0.72882632E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.56716984E-02  to -0.55657143E-02
 Step length   0.11015843616957767     
 Bisec iteration            3
call:     7 Dx =   0.11022547E+00  Penalty function =  0.9160115565367352E+01
 Current variables values
    1 -0.424142664206E-02
    2  0.528206192312E-02
    3 -0.500501814877E-02
    4  0.811281506146E-02
    5 -0.573305964892E-02
    6  0.730918237270E-02
    7 -0.600550287886E-02
    8  0.690519763502E-03
    9 -0.276519196655E-02
   10  0.489484777197E-02
   11  0.426599576120E-02
   12 -0.377306601757E-02
   13  0.410575616761E-02
   14 -0.635765344835E-02
   15  0.668402152736E-02
   16 -0.760936380901E-02
   17  0.754177617416E-02
   18 -0.527327150160E-02
   19 -0.216804109753E-02
   20 -0.338769338132E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    124979.15178361657     
reset parameter: kqt13.l8b1              from  0.73126478E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.56851331E-02  to -0.55657143E-02
 Step length   0.10660665581797710     
 Bisec iteration            2
call:     8 Dx =   0.10666920E+00  Penalty function =  0.8819977572558086E+01
 Current variables values
    1 -0.424939792310E-02
    2  0.528923327089E-02
    3 -0.497589180046E-02
    4  0.808596551645E-02
    5 -0.573180510128E-02
    6  0.734979241721E-02
    7 -0.589893599403E-02
    8  0.671501562407E-03
    9 -0.268298007672E-02
   10  0.506256440018E-02
   11  0.421458558544E-02
   12 -0.369345425029E-02
   13  0.411705153765E-02
   14 -0.634155491492E-02
   15  0.669804121129E-02
   16 -0.764892517186E-02
   17  0.754397130341E-02
   18 -0.534638219740E-02
   19 -0.218665817849E-02
   20 -0.330857963593E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    128343.47847136816     
reset parameter: kqt13.l8b1              from  0.73398808E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.57094983E-02  to -0.55657143E-02
 Step length    9.9991709998038233E-002
 Bisec iteration            2
call:     9 Dx =   0.10003859E+00  Penalty function =  0.7551340100856253E+01
 Current variables values
    1 -0.425868730907E-02
    2  0.529506680735E-02
    3 -0.495435567971E-02
    4  0.806599147109E-02
    5 -0.573933413257E-02
    6  0.738115348221E-02
    7 -0.581315116783E-02
    8  0.653553020882E-03
    9 -0.260405710928E-02
   10  0.518835187133E-02
   11  0.416224796372E-02
   12 -0.362226050793E-02
   13  0.412605220102E-02
   14 -0.632763568933E-02
   15  0.673014298158E-02
   16 -0.768407159771E-02
   17  0.754723198179E-02
   18 -0.540121521925E-02
   19 -0.217920975755E-02
   20 -0.322659072002E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    131553.45539765799     
reset parameter: kqt13.l8b1              from  0.73363142E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.57278571E-02  to -0.55657143E-02
 Step length    9.4226337357113985E-002
 Bisec iteration            1
call:    10 Dx =   0.94256186E-01  Penalty function =  0.6513637535241099E+01
 Current variables values
    1 -0.427292683613E-02
    2  0.530211031932E-02
    3 -0.492360812583E-02
    4  0.803685698367E-02
    5 -0.576059098901E-02
    6  0.742813395729E-02
    7 -0.567960242115E-02
    8  0.621639229523E-03
    9 -0.245214267568E-02
   10  0.537703307807E-02
   11  0.405702295205E-02
   12 -0.349422500935E-02
   13  0.414064925117E-02
   14 -0.630427458792E-02
   15  0.682286370081E-02
   16 -0.774762582767E-02
   17  0.755509145657E-02
   18 -0.548346475203E-02
   19 -0.212766814218E-02
   20 -0.306085643787E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    136393.40284832247     
reset parameter: kqt13.l8b1              from  0.72762738E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.57572330E-02  to -0.55657143E-02
 Step length    8.3737625443585983E-002
call:    11 Dx =   0.83737625E-01  Penalty function =  0.5262100351753657E+01
 Current variables values
    1 -0.427777656141E-02
    2  0.529687281445E-02
    3 -0.489956107205E-02
    4  0.801291245725E-02
    5 -0.580029839746E-02
    6  0.746679138713E-02
    7 -0.553931510072E-02
    8  0.573772711979E-03
    9 -0.217415540981E-02
   10  0.556571428480E-02
   11  0.385222997211E-02
   12 -0.329232960025E-02
   13  0.416109304997E-02
   14 -0.627998763084E-02
   15  0.709085539858E-02
   16 -0.784892712154E-02
   17  0.757342892433E-02
   18 -0.556571428480E-02
   19 -0.192245610294E-02
   20 -0.273707418869E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    140011.81426394204     
reset parameter: kqt13.l8b1              from  0.70375654E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.57888607E-02  to -0.55657143E-02
 Step length    6.6701777812236240E-002
call:    12 Dx =   0.66701778E-01  Penalty function =  0.4604190515463953E+01
 Current variables values
    1 -0.425492799668E-02
    2  0.526799767125E-02
    3 -0.491381009039E-02
    4  0.802834963952E-02
    5 -0.580501566368E-02
    6  0.743410374468E-02
    7 -0.554474831784E-02
    8  0.545209081759E-03
    9 -0.195387100435E-02
   10  0.556571428480E-02
   11  0.366710778620E-02
   12 -0.316611896363E-02
   13  0.417343619155E-02
   14 -0.628828793965E-02
   15  0.742967985217E-02
   16 -0.790812282766E-02
   17  0.759124835843E-02
   18 -0.556571428480E-02
   19 -0.162648580308E-02
   20 -0.246048673177E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    139333.68023692223     
reset parameter: kqt13.l8b1              from  0.67381973E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.57754681E-02  to -0.55657143E-02
 Step length    5.4691497295602236E-002
call:    13 Dx =   0.54691497E-01  Penalty function =  0.2258715676348550E+01
 Current variables values
    1 -0.423749385590E-02
    2  0.524174287115E-02
    3 -0.492662144862E-02
    4  0.804568133894E-02
    5 -0.580520126427E-02
    6  0.739756344450E-02
    7 -0.555122300192E-02
    8  0.514594177140E-03
    9 -0.178010554484E-02
   10  0.556571428480E-02
   11  0.348490039878E-02
   12 -0.305355072767E-02
   13  0.418355154126E-02
   14 -0.629604663069E-02
   15  0.776472020341E-02
   16 -0.795180376843E-02
   17  0.760696054580E-02
   18 -0.556571428480E-02
   19 -0.132630611978E-02
   20 -0.223890077573E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    140155.60289584621     
reset parameter: kqt13.l8b1              from  0.64268749E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.57426340E-02  to -0.55657143E-02
 Step length    4.1832000640082370E-002
call:    14 Dx =   0.41832001E-01  Penalty function =  0.9294872601082078E+00
 Current variables values
    1 -0.422185178061E-02
    2  0.521428674255E-02
    3 -0.493925113048E-02
    4  0.806371242395E-02
    5 -0.580399760890E-02
    6  0.735911449421E-02
    7 -0.555818770817E-02
    8  0.487820747995E-03
    9 -0.165385970091E-02
   10  0.556571428480E-02
   11  0.331535342175E-02
   12 -0.294420596183E-02
   13  0.419894974485E-02
   14 -0.629934824883E-02
   15  0.807029297999E-02
   16 -0.799603987742E-02
   17  0.762101288317E-02
   18 -0.556571428480E-02
   19 -0.105591251690E-02
   20 -0.207712097538E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    143256.60476003139     
reset parameter: kqt13.l8b1              from  0.60938521E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.56842665E-02  to -0.55657143E-02
 Step length    2.7776751879159133E-002
call:    15 Dx =   0.27776752E-01  Penalty function =  0.2049828669493633E+00
 Current variables values
    1 -0.420673291689E-02
    2  0.518441885998E-02
    3 -0.495356993205E-02
    4  0.808344368343E-02
    5 -0.580072906695E-02
    6  0.731776380797E-02
    7 -0.556964453381E-02
    8  0.464237123504E-03
    9 -0.157804406680E-02
   10  0.556571428480E-02
   11  0.317405608140E-02
   12 -0.284763977287E-02
   13  0.422400446876E-02
   14 -0.629794790975E-02
   15  0.832611285521E-02
   16 -0.803928893154E-02
   17  0.763102848627E-02
   18 -0.556571428480E-02
   19 -0.843351363339E-03
   20 -0.197855298972E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    145638.82288890335     
reset parameter: kqt13.l8b1              from  0.57867388E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.56130858E-02  to -0.55657143E-02
 Step length    1.3551371413376189E-002
call:    16 Dx =   0.13551371E-01  Penalty function =  0.1350857027362449E-01
 Current variables values
    1 -0.419484494046E-02
    2  0.515717421978E-02
    3 -0.496768680999E-02
    4  0.810202207129E-02
    5 -0.579558477893E-02
    6  0.727985878735E-02
    7 -0.558276867966E-02
    8  0.444557537750E-03
    9 -0.154790675662E-02
   10  0.556571428480E-02
   11  0.309191345261E-02
   12 -0.278949756524E-02
   13  0.425617956032E-02
   14 -0.629544991887E-02
   15  0.848510920061E-02
   16 -0.807050142662E-02
   17  0.763459618678E-02
   18 -0.556571428480E-02
   19 -0.724640639304E-03
   20 -0.193783494608E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    143124.43485356195     
reset parameter: kqt13.l8b1              from  0.56213545E-02  to  0.55657143E-02
reset parameter: kqtl11.r8b1             from -0.55741341E-02  to -0.55657143E-02
 Step length    4.1278777647948944E-003
call:    17 Dx =   0.41278778E-02  Penalty function =  0.2034693481514454E-02
 Current variables values
    1 -0.418941887903E-02
    2  0.514304263600E-02
    3 -0.497545803856E-02
    4  0.811206826560E-02
    5 -0.579214700902E-02
    6  0.725975092990E-02
    7 -0.558999498786E-02
    8  0.433280413611E-03
    9 -0.154107588533E-02
   10  0.556571428480E-02
   11  0.306852138863E-02
   12 -0.277221363832E-02
   13  0.427703713629E-02
   14 -0.629442541418E-02
   15  0.853957690148E-02
   16 -0.808343481310E-02
   17  0.763422384386E-02
   18 -0.556571428480E-02
   19 -0.687502823137E-03
   20 -0.192792467200E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    140334.28484516375     
reset parameter: kqt13.l8b1              from  0.55781274E-02  to  0.55657143E-02
 Step length    9.9775651313575809E-004
call:    18 Dx =   0.99775651E-03  Penalty function =  0.3255349034452983E-03
 Current variables values
    1 -0.418806009058E-02
    2  0.513939485058E-02
    3 -0.497736070107E-02
    4  0.811462622636E-02
    5 -0.579130831652E-02
    6  0.725446114751E-02
    7 -0.559162299017E-02
    8  0.430261528383E-03
    9 -0.153958997202E-02
   10  0.556571428480E-02
   11  0.306316926404E-02
   12 -0.276760868966E-02
   13  0.428257034311E-02
   14 -0.629411580976E-02
   15  0.855268732969E-02
   16 -0.808719170939E-02
   17  0.763414494762E-02
   18 -0.556646797475E-02
   19 -0.677737168124E-03
   20 -0.192562145159E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    139682.39526245414     
reset parameter: kqt13.l8b1              from  0.55687531E-02  to  0.55666755E-02
 Step length    2.4694138472444591E-004
call:    19 Dx =   0.24694138E-03  Penalty function =  0.9478110435143242E-05
 Current variables values
    1 -0.418776366664E-02
    2  0.513859214644E-02
    3 -0.497765069052E-02
    4  0.811513502933E-02
    5 -0.579120090232E-02
    6  0.725323780469E-02
    7 -0.559174085869E-02
    8  0.429614672918E-03
    9 -0.153920229869E-02
   10  0.556667551544E-02
   11  0.306180977007E-02
   12 -0.276611506113E-02
   13  0.428370757171E-02
   14 -0.629405700437E-02
   15  0.855572170351E-02
   16 -0.808830121441E-02
   17  0.763423241993E-02
   18 -0.556634633825E-02
   19 -0.674995509791E-03
   20 -0.192500376687E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    139585.68467854822     
 Step length    4.2425516659179985E-005
call:    20 Dx =   0.42425517E-04  Penalty function =  0.6767442351150126E-10
 Current variables values
    1 -0.418771366260E-02
    2  0.513845706635E-02
    3 -0.497769826516E-02
    4  0.811521896786E-02
    5 -0.579118304850E-02
    6  0.725303261504E-02
    7 -0.559175936596E-02
    8  0.429513021772E-03
    9 -0.153913552376E-02
   10  0.556719539122E-02
   11  0.306156797520E-02
   12 -0.276585707932E-02
   13  0.428389435829E-02
   14 -0.629404762216E-02
   15  0.855625099253E-02
   16 -0.808848749787E-02
   17  0.763424971632E-02
   18 -0.556632663057E-02
   19 -0.674524313045E-03
   20 -0.192489811164E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    139570.37105970635     
 Step length    2.7152464153010142E-008
call:    21 Dx =   0.27152464E-07  Penalty function =  0.3613321986987558E-19
 Current variables values
    1 -0.418771366321E-02
    2  0.513845706881E-02
    3 -0.497769825969E-02
    4  0.811521899254E-02
    5 -0.579118305324E-02
    6  0.725303259205E-02
    7 -0.559175933581E-02
    8  0.429512905256E-03
    9 -0.153913556670E-02
   10  0.556719511054E-02
   11  0.306156821883E-02
   12 -0.276585722381E-02
   13  0.428389443238E-02
   14 -0.629404764932E-02
   15  0.855625059292E-02
   16 -0.808848748484E-02
   17  0.763424967501E-02
   18 -0.556632658765E-02
   19 -0.674524607751E-03
   20 -0.192489817381E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    139570.34739798334     
 Step length    9.7843883494754576E-013
call:    22 Dx =   0.97843883E-12  Penalty function =  0.4442110809526381E-24
 ++++++++++ JACOBIAN ended: converged successfully
 Final difference norm:   6.5242224687476091E-002

MATCH SUMMARY

--------------------------------------------------------------------
macro: m1                  
  constraint: table(twiss,ip8,betx)=beta.ip8          
  values:     +6.00000e+00=+6.00000e+00
  weight:     +1.00000e+00
  penalty:    +5.77316e-14

  constraint: table(twiss,ip8,bety)=beta.ip8          
  values:     +6.00000e+00=+6.00000e+00
  weight:     +1.00000e+00
  penalty:    -4.26326e-14

  constraint: table(twiss,ip8,alfx)=0                 
  values:     +7.73004e-15=+0.00000e+00
  weight:     +1.00000e+00
  penalty:    +7.73004e-15

  constraint: table(twiss,ip8,alfy)=0                 
  values:     -1.26641e-14=+0.00000e+00
  weight:     +1.00000e+00
  penalty:    -1.26641e-14

  constraint: table(twiss,ip8,dx)=0                   
  values:     +4.32976e-16=+0.00000e+00
  weight:     +1.00000e+00
  penalty:    +4.32976e-16

  constraint: table(twiss,ip8,dpx)=0                  
  values:     +6.79439e-17=+0.00000e+00
  weight:     +1.00000e+00
  penalty:    +6.79439e-17

  constraint: table(twiss,e.ds.r8.b1,alfx)=eir8b1->alfx
  values:     -5.15245e-01=-5.15245e-01
  weight:     +1.00000e+00
  penalty:    +1.02141e-14

  constraint: table(twiss,e.ds.r8.b1,alfy)=eir8b1->alfy
  values:     +2.34716e+00=+2.34716e+00
  weight:     +1.00000e+00
  penalty:    -5.32907e-15

  constraint: table(twiss,e.ds.r8.b1,betx)=eir8b1->betx
  values:     +3.14155e+01=+3.14155e+01
  weight:     +1.00000e+00
  penalty:    +1.06581e-13

  constraint: table(twiss,e.ds.r8.b1,bety)=eir8b1->bety
  values:     +1.72206e+02=+1.72206e+02
  weight:     +1.00000e+00
  penalty:    +6.53699e-13

  constraint: table(twiss,e.ds.r8.b1,dx)=eir8b1->dx   
  values:     +9.95758e-01=+9.95758e-01
  weight:     +1.00000e+00
  penalty:    -2.99760e-15

  constraint: table(twiss,e.ds.r8.b1,dpx)=eir8b1->dpx 
  values:     +1.28965e-02=+1.28965e-02
  weight:     +1.00000e+00
  penalty:    -7.45931e-17

  constraint: table(twiss,e.ds.r8.b1,mux)=muxip8      
  values:     +3.20400e+00=+3.20400e+00
  weight:     +1.00000e+00
  penalty:    +3.99680e-15

  constraint: table(twiss,e.ds.r8.b1,muy)=muyip8      
  values:     +2.80400e+00=+2.80400e+00
  weight:     +1.00000e+00
  penalty:    -4.44089e-16



Final Penalty Function =   4.44211081e-25



Variable                 Final Value  Initial Value Lower Limit  Upper Limit 
--------------------------------------------------------------------------------
kq4.l8b1                 -4.18771e-03 -4.31524e-03 -8.56571e-03  8.56571e-03
kq5.l8b1                  5.13846e-03  5.28621e-03 -8.56571e-03  8.56571e-03
kq6.l8b1                 -4.97770e-03 -5.10286e-03 -8.56571e-03  8.56571e-03
kq7.l8b1                  8.11522e-03  8.25168e-03 -8.56571e-03  8.56571e-03
kq8.l8b1                 -5.79118e-03 -5.85528e-03 -8.56571e-03  8.56571e-03
kq9.l8b1                  7.25303e-03  7.07113e-03 -8.56571e-03  8.56571e-03
kq10.l8b1                -5.59176e-03 -6.39311e-03 -8.56571e-03  8.56571e-03
kqtl11.l8b1               4.29513e-04  7.07398e-04 -5.56771e-03  5.56771e-03
kqt12.l8b1               -1.53914e-03 -3.08650e-03 -5.56771e-03  5.56771e-03
kqt13.l8b1                5.56720e-03  3.78543e-03 -5.56771e-03  5.56771e-03
kq4.r8b1                  3.06157e-03  4.39728e-03 -8.56571e-03  8.56571e-03
kq5.r8b1                 -2.76586e-03 -4.21383e-03 -8.56571e-03  8.56571e-03
kq6.r8b1                  4.28389e-03  4.05914e-03 -8.56571e-03  8.56571e-03
kq7.r8b1                 -6.29405e-03 -6.65981e-03 -8.56571e-03  8.56571e-03
kq8.r8b1                  8.55625e-03  6.92571e-03 -8.56571e-03  8.56571e-03
kq9.r8b1                 -8.08849e-03 -7.46154e-03 -8.56571e-03  8.56571e-03
kq10.r8b1                 7.63425e-03  7.55573e-03 -8.56571e-03  8.56571e-03
kqtl11.r8b1              -5.56633e-03 -4.78966e-03 -5.56771e-03  5.56771e-03
kqt12.r8b1               -6.74525e-04 -1.74210e-03 -5.56771e-03  5.56771e-03
kqt13.r8b1               -1.92490e-03 -3.61438e-03 -5.56771e-03  5.56771e-03

END MATCH SUMMARY

VARIABLE "TAR" SET TO   4.44211081e-25
ncall              =                485 ;
++++++ warning: macro redefined: m1
number of variables:    20
user given constraints: 0
total constraints:      14

START JACOBIAN:

 JACOBIAN Strategy =           3
Initial Penalty Function =   0.1152000000000008E+02


 Current variables values
    1 -0.418771366321E-02
    2  0.513845706882E-02
    3 -0.497769825968E-02
    4  0.811521899254E-02
    5 -0.579118305324E-02
    6  0.725303259205E-02
    7 -0.559175933580E-02
    8  0.429512905258E-03
    9 -0.153913556670E-02
   10  0.556719511053E-02
   11  0.306156821882E-02
   12 -0.276585722380E-02
   13  0.428389443236E-02
   14 -0.629404764932E-02
   15  0.855625059292E-02
   16 -0.808848748484E-02
   17  0.763424967501E-02
   18 -0.556632658765E-02
   19 -0.674524607755E-03
   20 -0.192489817381E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    139570.34744331895     
 exclude parameter:kqtl11.r8b1                                     hit minimum
 Reset system to           14 con,          19 var
 Solve system with           14 con,          19 var
 Rank            14   Condition number    143690.81101095103     
 Step length    4.8357511649725356E-002
 Bisec iteration            1
call:     2 Dx =   0.48260708E-01  Penalty function =  0.1074371575873705E+02
 Current variables values
    1 -0.412036389029E-02
    2  0.496833103388E-02
    3 -0.514743693541E-02
    4  0.819505546705E-02
    5 -0.571340563413E-02
    6  0.724790388324E-02
    7 -0.566333106689E-02
    8  0.417691131911E-03
    9 -0.157854150777E-02
   10  0.541148294761E-02
   11  0.325589401461E-02
   12 -0.286337578370E-02
   13  0.452705911087E-02
   14 -0.637274922644E-02
   15  0.825861218622E-02
   16 -0.797864211935E-02
   17  0.759777314377E-02
   18 -0.556632658765E-02
   19 -0.819660406472E-03
   20 -0.196764258280E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    135974.62716987578     
 exclude parameter:kqt13.l8b1                                      hit maximum
 Reset system to           14 con,          19 var
 Solve system with           14 con,          19 var
 Rank            14   Condition number    137553.88127010380     
 Step length    2.4180348050470313E-002
call:     3 Dx =   0.24180348E-01  Penalty function =  0.6070609530306151E+01
 Current variables values
    1 -0.401694244913E-02
    2  0.476137071740E-02
    3 -0.537730057683E-02
    4  0.833069010534E-02
    5 -0.562135207160E-02
    6  0.727551090404E-02
    7 -0.577899065769E-02
    8  0.427757491084E-03
    9 -0.156681896082E-02
   10  0.541148294761E-02
   11  0.310458348169E-02
   12 -0.275884382475E-02
   13  0.474993188956E-02
   14 -0.645324326828E-02
   15  0.835857638743E-02
   16 -0.787192262138E-02
   17  0.758182158870E-02
   18 -0.553003669478E-02
   19 -0.530319007633E-03
   20 -0.192231762356E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    136698.29054468981     
 Step length    4.9695209385229935E-003
call:     4 Dx =   0.49695209E-02  Penalty function =  0.5373631907190058E-01
 Current variables values
    1 -0.399519905972E-02
    2  0.473803848236E-02
    3 -0.541775671656E-02
    4  0.836932253501E-02
    5 -0.561979187666E-02
    6  0.727740715697E-02
    7 -0.580248196118E-02
    8  0.431123918358E-03
    9 -0.157211234885E-02
   10  0.539340527876E-02
   11  0.313062024462E-02
   12 -0.278084514495E-02
   13  0.479143370574E-02
   14 -0.645517811107E-02
   15  0.829083694958E-02
   16 -0.783889433111E-02
   17  0.757503242558E-02
   18 -0.555288278875E-02
   19 -0.550413600901E-03
   20 -0.192665393577E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    138078.18254547854     
 Step length    4.5636885855035323E-004
call:     5 Dx =   0.45636886E-03  Penalty function =  0.1303846451011535E-05
 Current variables values
    1 -0.399544440288E-02
    2  0.473765385590E-02
    3 -0.541887586843E-02
    4  0.837014307345E-02
    5 -0.561910463105E-02
    6  0.727801923293E-02
    7 -0.580310836053E-02
    8  0.431287650114E-03
    9 -0.157163330902E-02
   10  0.539719831631E-02
   11  0.312668560618E-02
   12 -0.277859111218E-02
   13  0.479049200226E-02
   14 -0.645439754906E-02
   15  0.829703650081E-02
   16 -0.783835234864E-02
   17  0.757524761493E-02
   18 -0.555062743181E-02
   19 -0.544221561814E-03
   20 -0.192560137466E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    137924.12635226478     
 Step length    2.3832577786501055E-006
call:     6 Dx =   0.23832578E-05  Penalty function =  0.2658709130673121E-13
 Current variables values
    1 -0.399544463273E-02
    2  0.473765465980E-02
    3 -0.541887815577E-02
    4  0.837014308471E-02
    5 -0.561910051493E-02
    6  0.727802255012E-02
    7 -0.580311289765E-02
    8  0.431291168911E-03
    9 -0.157163058976E-02
   10  0.539721763654E-02
   11  0.312666688838E-02
   12 -0.277857859097E-02
   13  0.479048629806E-02
   14 -0.645439620237E-02
   15  0.829707039228E-02
   16 -0.783835153813E-02
   17  0.757524909630E-02
   18 -0.555061520527E-02
   19 -0.544189217268E-03
   20 -0.192559601108E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    137924.81207714681     
 Step length    5.3057476692657033E-010
call:     7 Dx =   0.53057477E-09  Penalty function =  0.3893261649441438E-20
 Current variables values
    1 -0.399544463220E-02
    2  0.473765465996E-02
    3 -0.541887815737E-02
    4  0.837014308447E-02
    5 -0.561910051398E-02
    6  0.727802255116E-02
    7 -0.580311290056E-02
    8  0.431291170635E-03
    9 -0.157163058924E-02
   10  0.539721764045E-02
   11  0.312666688670E-02
   12 -0.277857858989E-02
   13  0.479048629603E-02
   14 -0.645439620063E-02
   15  0.829707039947E-02
   16 -0.783835153731E-02
   17  0.757524909662E-02
   18 -0.555061520311E-02
   19 -0.544189209203E-03
   20 -0.192559600978E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    137924.81166165331     
 Step length    3.7819467978637247E-014
call:     8 Dx =   0.37819468E-13  Penalty function =  0.1154838271735424E-23
 Current variables values
    1 -0.399544463220E-02
    2  0.473765465996E-02
    3 -0.541887815737E-02
    4  0.837014308447E-02
    5 -0.561910051398E-02
    6  0.727802255116E-02
    7 -0.580311290056E-02
    8  0.431291170635E-03
    9 -0.157163058924E-02
   10  0.539721764045E-02
   11  0.312666688670E-02
   12 -0.277857858989E-02
   13  0.479048629603E-02
   14 -0.645439620063E-02
   15  0.829707039947E-02
   16 -0.783835153731E-02
   17  0.757524909662E-02
   18 -0.555061520311E-02
   19 -0.544189209203E-03
   20 -0.192559600978E-02
 Solve system with           14 con,          20 var
 Rank            14   Condition number    137924.81151913380     
 Step length    2.2526024214612985E-015
 Bisec iteration            1
call:     9 Dx =   0.22526024E-14  Penalty function =  0.8205324976402832E-24
 ++++++++++ JACOBIAN ended: converged successfully
 Final difference norm:   3.1617235867564999E-002

MATCH SUMMARY

--------------------------------------------------------------------
macro: m1                  
  constraint: table(twiss,ip8,betx)=beta.ip8          
  values:     +3.60000e+00=+3.60000e+00
  weight:     +1.00000e+00
  penalty:    +1.42109e-14

  constraint: table(twiss,ip8,bety)=beta.ip8          
  values:     +3.60000e+00=+3.60000e+00
  weight:     +1.00000e+00
  penalty:    +6.21725e-15

  constraint: table(twiss,ip8,alfx)=0                 
  values:     -5.25350e-15=+0.00000e+00
  weight:     +1.00000e+00
  penalty:    -5.25350e-15

  constraint: table(twiss,ip8,alfy)=0                 
  values:     +1.50100e-15=+0.00000e+00
  weight:     +1.00000e+00
  penalty:    +1.50100e-15

  constraint: table(twiss,ip8,dx)=0                   
  values:     -1.38398e-16=+0.00000e+00
  weight:     +1.00000e+00
  penalty:    -1.38398e-16

  constraint: table(twiss,ip8,dpx)=0                  
  values:     -1.26411e-17=+0.00000e+00
  weight:     +1.00000e+00
  penalty:    -1.26411e-17

  constraint: table(twiss,e.ds.r8.b1,alfx)=eir8b1->alfx
  values:     -5.15245e-01=-5.15245e-01
  weight:     +1.00000e+00
  penalty:    -1.72085e-14

  constraint: table(twiss,e.ds.r8.b1,alfy)=eir8b1->alfy
  values:     +2.34716e+00=+2.34716e+00
  weight:     +1.00000e+00
  penalty:    +0.00000e+00

  constraint: table(twiss,e.ds.r8.b1,betx)=eir8b1->betx
  values:     +3.14155e+01=+3.14155e+01
  weight:     +1.00000e+00
  penalty:    +5.61329e-13

  constraint: table(twiss,e.ds.r8.b1,bety)=eir8b1->bety
  values:     +1.72206e+02=+1.72206e+02
  weight:     +1.00000e+00
  penalty:    -7.10543e-13

  constraint: table(twiss,e.ds.r8.b1,dx)=eir8b1->dx   
  values:     +9.95758e-01=+9.95758e-01
  weight:     +1.00000e+00
  penalty:    +0.00000e+00

  constraint: table(twiss,e.ds.r8.b1,dpx)=eir8b1->dpx 
  values:     +1.28965e-02=+1.28965e-02
  weight:     +1.00000e+00
  penalty:    +6.76542e-17

  constraint: table(twiss,e.ds.r8.b1,mux)=muxip8      
  values:     +3.20400e+00=+3.20400e+00
  weight:     +1.00000e+00
  penalty:    +1.33227e-15

  constraint: table(twiss,e.ds.r8.b1,muy)=muyip8      
  values:     +2.80400e+00=+2.80400e+00
  weight:     +1.00000e+00
  penalty:    -1.77636e-15



Final Penalty Function =   8.20532498e-25



Variable                 Final Value  Initial Value Lower Limit  Upper Limit 
--------------------------------------------------------------------------------
kq4.l8b1                 -3.99544e-03 -4.18771e-03 -8.56571e-03  8.56571e-03
kq5.l8b1                  4.73765e-03  5.13846e-03 -8.56571e-03  8.56571e-03
kq6.l8b1                 -5.41888e-03 -4.97770e-03 -8.56571e-03  8.56571e-03
kq7.l8b1                  8.37014e-03  8.11522e-03 -8.56571e-03  8.56571e-03
kq8.l8b1                 -5.61910e-03 -5.79118e-03 -8.56571e-03  8.56571e-03
kq9.l8b1                  7.27802e-03  7.25303e-03 -8.56571e-03  8.56571e-03
kq10.l8b1                -5.80311e-03 -5.59176e-03 -8.56571e-03  8.56571e-03
kqtl11.l8b1               4.31291e-04  4.29513e-04 -5.56771e-03  5.56771e-03
kqt12.l8b1               -1.57163e-03 -1.53914e-03 -5.56771e-03  5.56771e-03
kqt13.l8b1                5.39722e-03  5.56720e-03 -5.56771e-03  5.56771e-03
kq4.r8b1                  3.12667e-03  3.06157e-03 -8.56571e-03  8.56571e-03
kq5.r8b1                 -2.77858e-03 -2.76586e-03 -8.56571e-03  8.56571e-03
kq6.r8b1                  4.79049e-03  4.28389e-03 -8.56571e-03  8.56571e-03
kq7.r8b1                 -6.45440e-03 -6.29405e-03 -8.56571e-03  8.56571e-03
kq8.r8b1                  8.29707e-03  8.55625e-03 -8.56571e-03  8.56571e-03
kq9.r8b1                 -7.83835e-03 -8.08849e-03 -8.56571e-03  8.56571e-03
kq10.r8b1                 7.57525e-03  7.63425e-03 -8.56571e-03  8.56571e-03
kqtl11.r8b1              -5.55062e-03 -5.56633e-03 -5.56771e-03  5.56771e-03
kqt12.r8b1               -5.44189e-04 -6.74525e-04 -5.56771e-03  5.56771e-03
kqt13.r8b1               -1.92560e-03 -1.92490e-03 -5.56771e-03  5.56771e-03

END MATCH SUMMARY

VARIABLE "TAR" SET TO   8.20532498e-25
ncall              =                665 ;
write,table=str.ip8.b1,file="output/str.ip8.b1.dat";

value, ncall;

ncall              =                665 ;
stop;


  Number of warnings: 1
1 in C and 0 in Fortran

  ++++++++++++++++++++++++++++++++++++++++++++
  +          MAD-X finished normally         +
  ++++++++++++++++++++++++++++++++++++++++++++
