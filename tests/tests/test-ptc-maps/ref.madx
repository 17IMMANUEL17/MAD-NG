option, RBARC=false;
x0=3e-3; px0=-2e-4; y0=-2e-3; py0=3e-4; t0=1e-5; pt0=2e-5;

call file="element.seq";
beam, energy=ENERGY;

    if (x0i == 1) { x= 0; px=  0; y= 0; py=  0; t= 0; pt=  0; }
elseif (x0i == 2) { x=x0; px=px0; y=y0; py=py0; t= 0; pt=  0; } ! 4D
elseif (x0i == 3) { x=x0; px=px0; y=y0; py=py0; t= 0; pt=pt0; } ! 5D
elseif (x0i == 4) { x=x0; px=px0; y=y0; py=py0; t=t0; pt=pt0; } ! 6D
else              { print, text="invalid X0 initialisation!"; }

truerbend=true; !Double check
ptcrbend=true;  !Double check  
use, sequence=seq ;
ptc_create_universe;
ptc_create_layout, model=2, method=METHOD, nst=NSLICE, time=true, exact=true;
if (FRINGE > 0) { ptc_setswitch, mapdump=3, debuglevel=2, madprint=true, exact_mis=true, time=true, totalpath=false, fringe=true ; }
else            { ptc_setswitch, mapdump=3, debuglevel=2, madprint=true, exact_mis=true, time=true, totalpath=false ; }
ptc_normal, closed_orbit=false, no=ORDER, icase=ICASE, x=x, px=px, y=y, py=py, t=t, pt=pt;
ptc_end;
